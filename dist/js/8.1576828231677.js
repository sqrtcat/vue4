(window.webpackJsonp_name_library=window.webpackJsonp_name_library||[]).push([[8],{302:function(e,t,s){"use strict";s(71),s(74),s(75),s(182),s(42),s(178),s(70),s(180),s(181),s(30),s(72),s(73),s(123),s(308),s(124),s(187),s(183),s(185),s(125),s(310);var i=s(326),m=s.n(i),n=s(130),o=s(327),v=s.n(o);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var f=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m.a.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)}),g(c(e=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}(this,l(t).call(this))),"errorMess","网络异常！请稍后重试"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n["a"]),function(e,t,s){t&&a(e.prototype,t),s&&a(e,s)}(t,[{key:"request",value:function(e,t,s,i,n,o,r){var a,l=this,c=4<arguments.length&&void 0!==n?n:"json",u=5<arguments.length?o:void 0,f=6<arguments.length?r:void 0;""!=u?("true"==u&&(u=!0),"false"==u&&(u=!1)):u=this.setWithCredentials();var d=this.getHeader(i),p=["get"].includes(s)?"params":"data";d["Content-Type"].includes("urlencoded")&&!["get"].includes(s)&&(t=v.a.stringify(t));var h=(g(a={url:e,method:s,headers:d},p,t),g(a,"responseType",c),g(a,"withCredentials",u),a);return f&&(h.onDownloadProgress=f),m.a.request(h).catch(function(e){l.getMessage(e,"catch")}).then(function(e){return l.getMessage(e,"then"),e})}},{key:"getHeader",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},s={"Content-Type":this.contentType(t)};t.type&&delete t.type,"object"===r(t)&&Object.assign(s,t);var i=this.setToken();return Object.assign(s,i),s}},{key:"get",value:function(e,t,s){var i=2<arguments.length&&void 0!==s?s:{};return this.requestConfig(e,t,"get",i)}},{key:"post",value:function(e,t,s){var i=2<arguments.length&&void 0!==s?s:{};return this.requestConfig(e,t,"post",i)}},{key:"put",value:function(e,t,s){var i=2<arguments.length&&void 0!==s?s:{};return this.requestConfig(e,t,"PUT",i)}},{key:"delete",value:function(e,t,s){var i=2<arguments.length&&void 0!==s?s:{};return this.requestConfig(e,t,"delete",i)}},{key:"all",value:function(e){return m.a.all(e)}},{key:"requestConfig",value:function(t,e,s,i){var n=this,o=3<arguments.length&&void 0!==i?i:{},r=[this.getDomainApi().concat(t),"","","",!1],a=r[0],l=r[1],c=r[2],u=r[3],f=r[4];return Object.keys(o).forEach(function(e){"isUrl"==e?a=t:"header"==e?l=o[e]:"responseType"==e?c=o[e]:"env"==e?a=n.getDomainApi(o[e]).concat(t):"withCredentials"==e?u=o[e]:"Url"==e?a=o[e].concat(t):"download"==e&&(f=o[e])}),this.request(a,e,s,l,c,u,f)}},{key:"getDomainApi",value:function(){return""}},{key:"contentType",value:function(e){return"application/json"}},{key:"getMessage",value:function(){}},{key:"setWithCredentials",value:function(){return!1}},{key:"storage",value:function(e,t,s){if(!s){if(t)return localStorage.setItem(e,JSON.stringify(t));var i=localStorage.getItem(e)||"";return i&&JSON.parse(i)||""}localStorage.removeItem(e)}},{key:"session",value:function(e,t,s){if(!s){if(t)return sessionStorage.setItem(e,JSON.stringify(t));var i=sessionStorage.getItem(e)||"";return i&&JSON.parse(i)||""}sessionStorage.removeItem(e)}},{key:"setToken",value:function(){return{}}}]),t}(),d=s(129);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var x=function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(b(e=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}(this,y(t).call(this))),"prod","http://".concat(window.location.host,"/")),C(b(e),"ftp",{me:"http://47.100.197.169:8080/",inte:"http://118.24.198.193:8080/",prod:e.prod}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,f),function(e,t,s){t&&h(e.prototype,t),s&&h(e,s)}(t,[{key:"getEnvName",value:function(){var e="prod",t=window.location.href;return 0<t.indexOf("localhost")?e="me":0<t.indexOf("6006")?e="inte":0<t.indexOf("vue4.0")&&(e="inte"),e}},{key:"getDomainApi",value:function(){return this.env("ftp")}},{key:"setWithCredentials",value:function(){return!0}},{key:"setToken",value:function(){return this.storage("userinfo")?{token:this.storage("userinfo").token}:{}}},{key:"getMessage",value:function(e,t){"then"==t&&(e.code&&"4405"==e.code?(d.Message.error(e.message||this.errorMess),window.location.href="#/"):e.code&&"7001"==e.code&&(d.Message.error(e.message||this.errorMess),window.location.href="#/info"))}}]),t}();t.a=new x},326:function(e,t,s){e.exports=s(31)(16)},391:function(e,t,s){},563:function(e,t,s){"use strict";var i=s(391);s.n(i).a},876:function(e,t,s){"use strict";s.r(t);function i(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"w-all wi-1000 ff h-all"},[i("section",{staticClass:"w-all h-all flex"},[i("section",{staticClass:"w-220 bc-bs1 hi-100"},[s._m(0),i("div",{staticClass:"mt5"},[i("el-menu",{staticClass:"br-0 menu-config",on:{select:s.menuSelect}},s._l(s.menu,function(e,t){return i("transition",{key:t},[e.children?i("el-submenu",{staticClass:"menu-config-title",attrs:{index:e.path}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont mr12",class:e.icon}),i("span",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[s._v(s._s(e.title))])]),i("el-menu-item-group",s._l(e.children,function(e,t){return i("el-menu-item",{key:t,staticClass:"menu-config-item",attrs:{index:e.path}},[i("i",{staticClass:"iconfont mr6",class:e.icon}),i("span",[s._v(s._s(e.title))])])}),1)],1):s._e(),i("el-menu-item",{staticClass:"menu-config-title",attrs:{index:e.path}},[i("i",{staticClass:"iconfont mr12",class:e.icon}),i("span",{attrs:{slot:"title"},slot:"title"},[s._v(s._s(e.title))])])],1)}),1)],1)]),i("section",{staticClass:"flex-1 h-all fd-c flex"},[i("div",{staticClass:"h-45 bc-bs10 flex ai-c jc-b"},[i("div",{staticClass:"flex ai-c"},[i("div",{staticClass:"flex ai-c fc-fff hand ml10",on:{click:function(e){s.$store.state.isUpload=!0}}},[i("span",{staticClass:"iconfont iconshangchuan mr5"}),i("span",[s._v("外宣推送")])])]),i("div",{staticClass:"mr10 flex ai-c"},[i("span",{staticClass:"iconfont iconiconfontmyfill fc-fff fs-22 mr5"}),i("el-dropdown",{staticClass:"outline",on:{command:s.handleCommand}},[i("span",{staticClass:"fc-fff outline fs-18 hand"},[s._v("\n              "+s._s(s.user.loginName)),i("i",{staticClass:"iconfont iconpaixu- fs-12 ml5"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"1"}},[s._v("密码修改")])],1)],1)],1)]),i("div",{staticClass:"pp10 bc-bs flex-1 auto"},[i("router-view")],1)])]),i("el-dialog",{attrs:{title:"修改密码",center:!0,width:"400px","append-to-body":!0,visible:s.isModel},on:{"update:visible":function(e){s.isModel=e}}},[i("el-form",{ref:"ruleForm",attrs:{inline:!0,model:s.ruleForm,rules:s.rules,"label-width":"120px",size:"medium"}},[i("el-row",{staticClass:"text-center"},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"旧密码",prop:"oldPsd"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:s.ruleForm.oldPsd,callback:function(e){s.$set(s.ruleForm,"oldPsd",e)},expression:"ruleForm.oldPsd"}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"新密码",prop:"newPsd"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:s.ruleForm.newPsd,callback:function(e){s.$set(s.ruleForm,"newPsd",e)},expression:"ruleForm.newPsd"}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"确认新密码",prop:"checkNewPsd"}},[i("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:s.ruleForm.checkNewPsd,callback:function(e){s.$set(s.ruleForm,"checkNewPsd",e)},expression:"ruleForm.checkNewPsd"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:24,offset:15}},[i("el-form-item",{staticClass:"el-icon--left",attrs:{size:"small"}},[i("el-button",{on:{click:function(e){s.isModel=!1}}},[s._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:s.modifyBtn}},[s._v("确定修改")])],1)],1)],1)],1)],1),1<s.downloadFile.length?i("div",{staticClass:" fixed ab0 zi-100 ar0 sha-all bc-fff pp10",class:{"w-400":s.isFile,"":!s.isFile}},[i("div",{staticClass:"abs zi-120 hand at-11 al-11",on:{click:function(e){s.isFile=!s.isFile}}},[i("span",{staticClass:"iconfont fs-17 fc-999",class:{"iconicon-error":s.isFile,iconshouzhankaiqi:!s.isFile}})]),s.isFile?s._e():i("div",[i("span",{staticClass:"iconfont fs-25 fc-999 iconxiazai"})]),s.isFile?i("div",{staticClass:"w-all auto",staticStyle:{"max-height":"150px"}},s._l(s.downloadFile,function(e,t){return i("div",{directives:[{name:"show",rawName:"v-show",value:"111"!=e.uid,expression:"item.uid!='111'"}],key:t,staticClass:"w-all bb-e mt3 pt3 flex fd-c"},[i("div",{staticClass:"fs-13 flex ai-c"},[i("span",{staticClass:"iconfont iconLC_icon_download_fill fs-12"}),i("span",{staticClass:"ml10"},[s._v(s._s(e.fileName))])]),i("el-progress",{staticClass:"w-all flex ai-c",attrs:{percentage:e.pross}})],1)}),0):s._e()]):s._e(),i("upload",{directives:[{name:"show",rawName:"v-show",value:s.isUpload,expression:"isUpload"}],attrs:{uploadType:0}}),i("upload",{directives:[{name:"show",rawName:"v-show",value:s.isTrans,expression:"isTrans"}],attrs:{uploadType:1}})],1)}i._withStripped=!0;s(71),s(190),s(308),s(384),s(70),s(385),s(386),s(183),s(310);function n(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fixed at0 ab0 zi-140 bc-t8 al0 ar0"},[s("div",{staticClass:"w-all h-all flex ai-c jc-c"},[s("div",{staticClass:"w-600 flex fd-c sha-all rel pp5 ra-5 bc-fff"},[s("div",{staticClass:"abs ar-18 at-18 bc-fff ra-all sha-all w-23 pt2 h-23"},[s("span",{staticClass:"iconfont hand ml2 icondelete fs-18 mr10",on:{click:function(e){return t.$store.commit("setUpload",!1)}}})]),0==t.uploadType?s("div",{staticClass:"flex ai-c mt5 jc-b"},[s("span",{staticClass:"ml10"},[t._v("上传平台：")]),s("el-select",{staticClass:"flex-1 ml15 mr15",attrs:{multiple:"",size:"mini",placeholder:"请选择上传平台"},model:{value:t.ftpCode,callback:function(e){t.ftpCode=e},expression:"ftpCode"}},t._l(t.ftplist,function(e){return s("el-option",{key:e.value,attrs:{label:e.customerName,value:e.ftpCode}})}),1)],1):t._e(),s("div",{staticStyle:{height:"450px"},on:{click:t.isCodeUpload}},[s("uploader",{ref:"uploader",staticClass:"flex fd-c w-all h-all mt10 pl10 pr10 uploads",attrs:{"file-status-text":t.statusText,options:t.options},on:{"file-success":t.onFileSuccess,"file-added":t.onFileAdded}},[s("uploader-drop",{staticClass:"br-5 flex jc-c c-aaa fd-c hand mb10 pb10",staticStyle:{border:"1px dashed #d9d9d9"}},[s("uploader-btn",{staticClass:"flexupload",staticStyle:{border:"0"}},[s("div",{staticClass:"flex jc-c"},[s("i",{staticClass:"iconfont iconicon--",staticStyle:{"font-size":"60px"}})]),s("div",{staticClass:"flex jc-c"},[t._v("\n                将文件拖到此处，或\n                "),s("em",{staticClass:"fc-primary"},[t._v("点击上传")])])])],1),s("div",{ref:"uploaders",staticStyle:{flex:"1",position:"relative"},attrs:{id:"uploaders"}},[s("div",{staticClass:"body-flies"},[s("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"h-all"},[s("div",[s("uploader-list")],1)])])])],1)],1)])])])}var o=s(76);n._withStripped=!0;s(123),s(124),s(182),s(561),s(562),s(77),s(364),s(30),s(43),s(33),s(125),s(184),s(350);var r=s(302),a={props:["uploadType"],data:function(){return{fileTypes:{xls:["xls","xlsx"],word:["doc","docx"],image:["png","jpg","jpeg","gif","bmp"],video:["3gp","flv","rmvb","avi","wmv","mpeg4"],zip:["zip","rar","7z","cab"]},dianList:[],total:0,isFile:!0,urls:"",baseUrl:"sys/uploadBigToFtp",endList:[],ftpCode:"",statusText:{success:"成功了",error:"出错了",uploading:"上传中",paused:"暂停中",waiting:"等待中"},options:{target:"",chunked:!0,chunkSize:"2048000",duplicate:!0,headers:{token:this.storage("userinfo").token},query:{ftpCode:"",userId:""},withCredentials:!0,testMethod:"POST",maxChunkRetries:3,testChunks:!1,checkChunkUploadedByResponse:function(e,t){var s=JSON.parse(t);return!!s.skipUpload||0<=(s.uploaded||[]).indexOf(e.offset+1)}},ftplist:[]}},methods:{isCodeUpload:function(e){if(!this.ftpCode.length&&0==this.uploadType)return this.$message.error("请先选择上传平台"),e.stopPropagation(),void(window.event.returnValue=!1)},deleteFiles:function(t){var s=this;this.$confirm("确定要删除吗！").then(function(e){r.a.post("sys/deleteFile",{id:t.id,userId:s.query.userId}).then(function(e){s.$message.error("删除成功")})})},onFileType:function(e){var t={video:"iconmeiti",zip:"iconRAR",word:"iconword",xls:"iconexclxlsxlsx",file:"iconfile"},s="iconfile";for(var i in this.fileTypes)this.fileTypes[i].includes(e.replace(/.+\./g,"").toLocaleLowerCase())&&(s="image"==i?"image":t[i]);return s},initData:function(){var t=this;r.a.get("sys/getCustomerList",{userId:this.storage("userinfo").id}).then(function(e){t.dianList=e.data}),r.a.get("sys/ftpCustomerList",{type:"0"}).then(function(e){t.ftplist=e.data})},download:function(e,t){var s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("target","_blank"),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},onFileSuccess:function(e,t,s){var i=this,n=JSON.parse(s);2e3==n.code&&this.endList.push({fileName:t.name,fileSize:t.size,fileUrl:n.data}),n.data.isMerge&&r.a.post("sys/merge",{ftpCode:this.ftpCode.toString(),fileName:t.name,userId:this.storage("userinfo").id,guid:n.data.guid,type:this.uploadType}).then(function(e){2e3==e.code&&(i.$message.success(t.name.concat("上传完成")),i.initData(),i.$store.state.changeUpload=i.$store.state.changeUpload+1,setTimeout(function(e){t.cancel()}))}),t.totalChunks<=1&&(this.$message.success(t.name.concat("上传完成")),this.initData(),this.$store.state.changeUpload=this.$store.state.changeUpload+1,setTimeout(function(e){t.cancel()}))},uuid:function(){for(var e=[],t="0123456789abcdef",s=0;s<36;s++)e[s]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i},onFileAdded:function(e){if(this.ftpCode.length||0!=this.uploadType)if(1==this.uploadType){[".asx",".asf",".mpg",".wmv",".3gp",".mp4",".mov",".avi",".flv"].includes(e.name.substring(e.name.lastIndexOf(".")).toLocaleLowerCase())||(this.$message.error("请上传视频或音频文件"),e.ignored=!0)}else this.options.query.ftpCode=this.ftpCode.toString(),this.options.query.userId=this.storage("userinfo").id,this.options.query.guid=this.uuid();else this.$message.error("请先选择上传平台"),e.ignored=!0}},created:function(){this.options.target=r.a.getDomainApi()+this.baseUrl,this.initData()}},l=(s(563),s(122)),c=Object(l.a)(a,n,[],!1,null,null,null);function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}c.options.__file="src/pages/user/uploads.vue";var d={components:{upload:c.exports},data:function(){var e,i=this;return f(e={user:this.storage("userinfo"),menu:[{title:"我的文件",path:"user-upload",icon:"iconwenjianjia",index:0},{title:"编辑下载",path:"user-file",icon:"iconic_edit",index:1},{title:"转码管理",path:"user-transcode",icon:"iconzhandian",index:2},{title:"退出登录",path:"clear",icon:"icontuichu2",index:3}]},"user",this.storage("userinfo")),f(e,"isModel",!1),f(e,"isFile",!0),f(e,"rules",{oldPsd:[{required:!0,message:"请输入密码"}],newPsd:[{required:!0,message:"请输入新密码"}],checkNewPsd:[{required:!0,validator:function(e,t,s){""===t?s(new Error("请再次输入密码")):t!==i.ruleForm.newPsd?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}),f(e,"ruleForm",{}),e},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(s,!0).forEach(function(e){f(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}({},Object(o.mapState)(["downloadFile","isUpload","isTrans"])),mounted:function(){},methods:{handleCommand:function(e){"1"==e&&(this.isModel=!0,this.ruleForm={},this.ruleForm.id=this.user.id)},menuSelect:function(e){var t=this;"clear"!=e?this.$router.push({name:e}):r.a.get("sys/logout",{}).then(function(e){2e3==e.code&&(localStorage.clear(),t.$router.push({name:"login"}))})},modifyPassword:function(){this.isModel=!0,this.ruleForm={},this.ruleForm.id=this.user.id},modifyBtn:function(){var t=this;this.ruleForm.newPsd.length<5?this.$message.error("密码至少为六位!"):this.ruleForm.newPsd!=this.ruleForm.oldPsd?this.ruleForm.newPsd==this.ruleForm.checkNewPsd?r.a.post("sys/modifyPassword",this.ruleForm).then(function(e){2e3==e.code?(t.$message.success("修改密码成功"),t.isModel=!1):t.$message.error(e.message)}):this.$message.error("两次输入密码不一致!"):this.$message.error("新密码不能与原密码一样!")}},created:function(){this.storage("userinfo")||this.$router.push({name:"login"})}},p=Object(l.a)(d,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"h-45 bc-bs11 flex fc-fff ai-c jc-s"},[t("span",{staticClass:"iconfont fs-20 mr10 fc-fff pl20 iconwenjianguanli"}),t("span",{staticClass:"fs-14"},[this._v("传媒之窗")])])}],!1,null,null,null);p.options.__file="src/pages/user/default.vue";t.default=p.exports}}]);